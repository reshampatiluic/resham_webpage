<!DOCTYPE html>
<html lang="en">
  <head>
    <title>
      {{ title | default(defaults.title) }} {{ name | default(defaults.name) }}
    </title>
    <meta charset="UTF-8"/>
    <meta http-equiv="x-ua-compatible" content="ie=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover"/>
    <!-- Use |url so /style.css becomes /<repo>/style.css on GitHub Pages -->
    <link rel="stylesheet" href="{{ '/style.css' | url }}?v={% version %}" type="text/css"/>
  </head>
  <body class="bg-uicblue">
    <div class="bg-uicblue grid place-items-center">
      <div id="main-panel" class="shadow-inner shadow-2xl relative bg-white max-w-4xl pb-10">
        <div id="top-bar" class="fixed z-10 text-uicblue max-w-4xl justify-between items-end p-2 flex flex-row text-center uppercase font-medium bg-white w-full">
          <a id="logo-link" class="basis-1/3" href="https://www.uic.edu/">
            <!-- (SVG unchanged) -->
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 358.3167 68.6566" aria-label="University of Illinois Chicago">
              <!-- ... existing SVG content ... -->
            </svg>
          </a>
          <!-- Use |url for internal links -->
          <a class="shrink text-sm" href="{{ '/' | url }}">home</a>
          <a class="shrink text-sm" href="{{ '/projects/' | url }}">projects</a>
          <a class="shrink text-sm" href="{{ '/#contact' | url }}">contact</a>
        </div>

        <div id="portrait-group" class="relative max-w-4xl mb-4">
          <!-- Use |url and cache-bust for the portrait background -->
          <div
            id="portrait"
            style="background-image: url('{{ (photo | default(defaults.portrait)) | url }}?v={% version %}');"
            class="object-contain h-[50vh] bg-cover bg-center"
          >&nbsp;</div>

          <!-- Use |url for static assets -->
          <img id="circlemark" class="absolute bottom-0 left-6 w-24" src="{{ '/circle.svg' | url }}" alt="UIC circle mark"/>

          <div id="name-title" class="relative mr-5 text-right" style="line-height: 12px">
            <span class="font-bold text-lg">{{ name | default(defaults.name) }}</span><br/>
            <span class="text-base font-normal">{{ title | default(defaults.title) }}</span>
          </div>
        </div>

        <div id="content" class="text-justify mx-8 text-base">
          {{ content | safe }}
        </div>
      </div>
    </div>

    <script>
      // Optional swipe-to-swap portrait.
      // If you keep this, make sure the alt image exists in photos/ as portrait-alt.jpg.
      (function(){
        var startE = 0;
        var el = document.getElementById('portrait');
        if (!el) return;
        el.addEventListener('touchstart', function(e){ if(e.changedTouches && e.changedTouches[0]) startE = e.changedTouches[0].screenX; }, {passive:true});
        el.addEventListener('touchend', function(e){
          if(e.changedTouches && e.changedTouches[0] && e.changedTouches[0].screenX < startE){
            el.style.backgroundImage = "url('{{ '/photos/portrait-alt.jpg' | url }}?v={% version %}')";
          }
        }, {passive:true});
      })();
    </script>
  </body>
</html>
